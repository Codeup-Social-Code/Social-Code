<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:replace="fragments/head :: head('SocialCode | Post')">
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<nav th:replace="fragments/navbar :: navbar"></nav>
<div th:if="${post}">
    <h1>Title: <span th:text="${post.title}"></span></h1>
    <h1>Created By: <span th:text="${post.user.firstName}"></span></h1>
    <h3>Body: <span th:text="${post.body}"></span></h3>
    <div th:each="category: ${post.categories}">
        <h2 th:text="${category.name}"></h2>
    </div>
</div>
<div th:if="${#authentication.principal.id == post.user.id}">
    <form th:action="${'/posts/' + post.id + '/edit'}">
        <button class="btn btn-warning">EDIT</button>
    </form>
<!--    <form th:action="${'/posts/' + post.id + '/edit'}">-->
<!--        <button class="btn btn-warning">DELETE</button>-->
<!--    </form>-->
</div>

<div class="container" th:if="${post}">
    <form th:action="@{/comments/create}" th:method="post" th:object="${comment}">
        comment body:
        <div>
            <input type="hidden" name="postId" th:value="${post.id}">
        </div>
        <input th:field="*{body}" />
        <br />
        <input type="submit" />
    </form>
</div>

<div>
    <form th:if="${post}" th:action="${'/posts/rsvp'}" th:method="POST">
        <input type="hidden" name="postId" th:value="${post.id}">
        <button class="btn btn-warning">RSVP</button>
    </form>
</div>


        <h1>List of RSVP: </h1>
        <ul >
            <div th:each="rsvp: ${rsvps}">
            <li th:text="${rsvp.user.firstName}"></li>
            </div>
        </ul>




<div th:each="comment: ${comments}">
    <h2>Comment: <span th:text="${comment.body}"></span> Created by: <span th:text="${comment.user.firstName}"></span></h2>
</div>

</body>
</html>