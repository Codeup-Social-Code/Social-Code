<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/head :: head('SocialCode | Post')">
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<nav th:replace="fragments/navbar :: navbar"></nav>
<div th:if="${post}">
    <h1>Title: <span th:text="${post.title}"></span></h1>
    <h1>Created By: <span th:text="${post.user.firstName}"></span></h1>
    <h3>Body: <span th:text="${post.body}"></span></h3>
    <div th:each="category: ${post.categories}">
        <h2 th:text="${category.name}"></h2>
    </div>
</div>
<form class="right" th:method="POST" th:action="@{/posts/delete}">
    <input type="hidden" name="id" th:value="${post.id}" />
    <span th:if="${isOwner}">
                    <a class="btn btn-floating" th:href="@{ /posts/{id}/edit(id=${post.id}) }">
                        <i class="material-icons">edit</i>
                    </a>
                    <button class="btn btn-floating deep-orange darken-4">
                        <i class="material-icons">delete</i>
                    </button>
    </span>
</form>

<div>
    <form th:if="${post}" th:action="${'/posts/rsvp'}" th:method="POST">
        <input type="hidden" name="postId" th:value="${post.id}">
        <button class="btn btn-warning">RSVP</button>
    </form>
</div>


        <h1>List of RSVP: </h1>
        <ul >
            <div th:each="rsvp: ${rsvps}">
            <li th:text="${rsvp.user.firstName}"></li>
            </div>
        </ul>

<div class="card m-5">
    <div th:each="comment: ${comments}" class="card-body">
        <span th:text="${comment.body}"></span> by: <span th:text="${comment.user.firstName}"></span>
    </div>
    <div class="card-body " th:if="${post}">
        <form th:action="@{/comments/create}" th:method="post" th:object="${comment}">
            comment body:
            <div>
                <input type="hidden" name="postId" th:value="${post.id}">
            </div>
            <input th:field="*{body}" />
            <br />
            <input class="btn btn-primary mt-2" type="submit" value="Submit">
        </form>
    </div>
</div>



</body>
</html>